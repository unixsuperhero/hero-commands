#!/usr/bin/env ruby

<%= inject_files 'src/lib/project_helper.rb.erb' %>

class TodoSubcommand < Subcommandable
  let(:todo_file) { File.join(Dir.home, 'todo.md') }
  let(:arg_matching_project) {
    project_name = ProjectHelper.project_matcher.match_name(args.first)
  }
  # def self.todo_file
  #   File.join Dir.home, 'todo.md'
  # end

  register_subcommand(:list) {
    cmd = HeroHelper.cmd_from('less', todo_file)
    exec cmd # exec('less "%s"' % todo_file)
  }

  register_subcommand(:edit) {
    HeroHelper.edit_in_editor(todo_file)
    # exec('%s "%s"' % [ENV.fetch('EDITOR', 'vim'), todo_file])
  }
end

MainCommand.register_subcommand(:todo) {
  TodoSubcommand.run(MainCommand.args)
}



# vim: ft=ruby
